<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="845px" preserveAspectRatio="none" style="width:948px;height:845px;" version="1.1" viewBox="0 0 948 845" width="948px" zoomAndPan="magnify"><defs/><g><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="24" x2="24" y1="34.2969" y2="805.3438"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="72" x2="72" y1="34.2969" y2="805.3438"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="125" x2="125" y1="34.2969" y2="805.3438"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="426" x2="426" y1="34.2969" y2="805.3438"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="565.5" x2="565.5" y1="34.2969" y2="805.3438"/><rect fill="#E6E6E6" height="30.2969" style="stroke: #FFFFFF; stroke-width: 1.5;" width="33" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="19" x="15" y="22.9951">UE</text><rect fill="#E6E6E6" height="30.2969" style="stroke: #FFFFFF; stroke-width: 1.5;" width="33" x="8" y="804.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="19" x="15" y="824.3389">UE</text><rect fill="#E6E6E6" height="30.2969" style="stroke: #FFFFFF; stroke-width: 1.5;" width="43" x="51" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="58" y="22.9951">gNB</text><rect fill="#E6E6E6" height="30.2969" style="stroke: #FFFFFF; stroke-width: 1.5;" width="43" x="51" y="804.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="58" y="824.3389">gNB</text><rect fill="#E6E6E6" height="30.2969" style="stroke: #FFFFFF; stroke-width: 1.5;" width="43" x="104" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="111" y="22.9951">SMF</text><rect fill="#E6E6E6" height="30.2969" style="stroke: #FFFFFF; stroke-width: 1.5;" width="43" x="104" y="804.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="111" y="824.3389">SMF</text><rect fill="#E6E6E6" height="30.2969" style="stroke: #FFFFFF; stroke-width: 1.5;" width="41" x="406" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="413" y="22.9951">UPF</text><rect fill="#E6E6E6" height="30.2969" style="stroke: #FFFFFF; stroke-width: 1.5;" width="41" x="406" y="804.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="413" y="824.3389">UPF</text><rect fill="#E6E6E6" height="30.2969" style="stroke: #FFFFFF; stroke-width: 1.5;" width="62" x="534.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="541.5" y="22.9951">8.8.8.8</text><rect fill="#E6E6E6" height="30.2969" style="stroke: #FFFFFF; stroke-width: 1.5;" width="62" x="534.5" y="804.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="541.5" y="824.3389">8.8.8.8</text><polygon fill="#000000" points="414.5,170.3594,424.5,174.3594,414.5,178.3594,418.5,174.3594" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="125.5" x2="420.5" y1="174.3594" y2="174.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="132.5" y="154.1606">25, PFCP req.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="132.5" y="169.2935">PFCP Session Establishment Request (50)</text><path d="M431,49.2969 L431,270.2969 L926,270.2969 L926,59.2969 L916,49.2969 L431,49.2969 " fill="#03B5AA" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M916,49.2969 L916,59.2969 L926,59.2969 L916,49.2969 " fill="#03B5AA" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="437" y="66.3638">SMF to UPF</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="441" y="81.4966">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="474" x="437" y="96.6294">pfcp.msg_type: 'Message Type: PFCP Session Establishment Request (50)'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="441" y="111.7622">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="437" y="126.895">pfcp.seid: 'SEID: &lt;Control_plane_SEID&gt;'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="449" y="142.0278">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="354" x="449" y="157.1606">pfcp.network_instance: 'Network Instance: CustomSlice'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="449" y="172.2935">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="350" x="461" y="187.4263">pfcp.apply_action.forw: '.... ..1. = FORW (Forward): True'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="339" x="461" y="202.5591">pfcp.apply_action.drop: '.... ...0 = DROP (Drop): False'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="461" y="217.6919">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="449" y="232.8247">pfcp.outer_hdr_creation.teid: 'TEID: &lt;TEID&gt;'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="409" x="449" y="247.9575">pfcp.outer_hdr_creation.ipv4: 'IPv4 Address: &lt;SMF_IP_Address&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="314" x="449" y="263.0903">&lt;Measurment, Reporting, and Volume Settings&gt;</text><polygon fill="#000000" points="136.5,345.6875,126.5,349.6875,136.5,353.6875,132.5,349.6875" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="130.5" x2="425.5" y1="349.6875" y2="349.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="142.5" y="329.4888">26, PFCP rsp.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="277" x="142.5" y="344.6216">PFCP Session Establishment Response (51)</text><path d="M431,281.1563 L431,389.1563 L936,389.1563 L936,291.1563 L926,281.1563 L431,281.1563 " fill="#D7FEFC" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M926,281.1563 L926,291.1563 L936,291.1563 L926,281.1563 " fill="#D7FEFC" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="437" y="298.2231">UPF to SMF</text><line style="stroke: #FFFFFF; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="432" x2="935" y1="301.2891" y2="301.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="484" x="437" y="317.356">pfcp.msg_type: 'Message Type: PFCP Session Establishment Response (51)'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="437" y="332.4888">pfcp.seid: 'SEID: &lt;User_plane_SEID&gt;'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="445" y="347.6216">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="445" y="362.7544">Cause : Request accepted(success):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="445" y="377.8872">...</text><polygon fill="#000000" points="414.5,475.6172,424.5,479.6172,414.5,483.6172,418.5,479.6172" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="125.5" x2="420.5" y1="479.6172" y2="479.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="132.5" y="459.4185">27, PFCP req.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="132.5" y="474.5513">PFCP Session Modification Request (52)</text><path d="M431,399.9531 L431,530.9531 L911,530.9531 L911,409.9531 L901,399.9531 L431,399.9531 " fill="#03B5AA" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M901,399.9531 L901,409.9531 L911,409.9531 L901,399.9531 " fill="#03B5AA" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="437" y="417.02">SMF to UPF</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="441" y="432.1528">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="459" x="437" y="447.2856">pfcp.msg_type: 'Message Type: PFCP Session Modification Request (52)'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="437" y="462.4185">pfcp.seid: 'SEID: &lt;User_plane_SEID&gt;'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="437" y="477.5513">Update FAR : [Grouped IE]:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="453" y="492.6841">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="404" x="453" y="507.8169">pfcp.outer_hdr_creation.ipv4: 'IPv4 Address: &lt;gNB_IP_Adress&gt;'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="453" y="522.9497">...</text><polygon fill="#000000" points="136.5,605.5469,126.5,609.5469,136.5,613.5469,132.5,609.5469" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="130.5" x2="425.5" y1="609.5469" y2="609.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="142.5" y="589.3481">28, PFCP rsp.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="142.5" y="604.481">PFCP Session Modification Response (53)</text><path d="M431,541.0156 L431,649.0156 L921,649.0156 L921,551.0156 L911,541.0156 L431,541.0156 " fill="#D7FEFC" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M911,541.0156 L911,551.0156 L921,551.0156 L911,541.0156 " fill="#D7FEFC" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="437" y="558.0825">UPF to SMF</text><line style="stroke: #FFFFFF; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="432" x2="920" y1="561.1484" y2="561.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="469" x="437" y="577.2153">pfcp.msg_type: 'Message Type: PFCP Session Modification Response (53)'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="437" y="592.3481">pfcp.seid: 'SEID: &lt;User_plane_SEID&gt;'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="445" y="607.481">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="445" y="622.6138">Cause : Request accepted(success):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="445" y="637.7466">...</text><polygon fill="#000000" points="414.5,674.9453,424.5,678.9453,414.5,682.9453,418.5,678.9453" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="72.5" x2="420.5" y1="678.9453" y2="678.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="79.5" y="673.8794">29, GTP&lt;ICMP&gt; ping req.</text><path d="M431,659.8125 L431,684.8125 L537,684.8125 L537,669.8125 L527,659.8125 L431,659.8125 " fill="#5C8001" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M527,659.8125 L527,669.8125 L537,669.8125 L527,659.8125 " fill="#5C8001" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="437" y="676.8794">gNB to UPF</text><polygon fill="#000000" points="553.5,710.0781,563.5,714.0781,553.5,718.0781,557.5,714.0781" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="426.5" x2="559.5" y1="714.0781" y2="714.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="433.5" y="709.0122">30, ICMP ping req.</text><path d="M570,694.9453 L570,719.9453 L696,719.9453 L696,704.9453 L686,694.9453 L570,694.9453 " fill="#5C8001" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M686,694.9453 L686,704.9453 L696,704.9453 L686,694.9453 " fill="#5C8001" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="576" y="712.0122">UPF to 8.8.8.8</text><polygon fill="#000000" points="437.5,745.2109,427.5,749.2109,437.5,753.2109,433.5,749.2109" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="431.5" x2="564.5" y1="749.2109" y2="749.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="443.5" y="744.145">31, ICMP ping rsp.</text><path d="M570,730.0781 L570,755.0781 L696,755.0781 L696,740.0781 L686,730.0781 L570,730.0781 " fill="#EDFEC2" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M686,730.0781 L686,740.0781 L696,740.0781 L686,730.0781 " fill="#EDFEC2" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="576" y="747.145">8.8.8.8 to UPF</text><polygon fill="#000000" points="35.5,780.3438,25.5,784.3438,35.5,788.3438,31.5,784.3438" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.0;" x1="29.5" x2="564.5" y1="784.3438" y2="784.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="41.5" y="779.2778">32, GTP&lt;ICMP&gt; ping rsp.</text><path d="M570,765.2109 L570,790.2109 L686,790.2109 L686,775.2109 L676,765.2109 L570,765.2109 " fill="#EDFEC2" style="stroke: #FFFFFF; stroke-width: 1.0;"/><path d="M676,765.2109 L676,775.2109 L686,775.2109 L676,765.2109 " fill="#EDFEC2" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="576" y="782.2778">8.8.8.8 to UE</text><!--MD5=[61afba822cefc6fcfe1d8ebfba6f4d39]
@startuml
skinparam shadowing false
skinparam NoteBorderColor white
skinparam sequence {
    ArrowColor black
    LifeLineBorderColor black
    LifeLineBackgroundColor black
    ParticipantBorderColor white
    ParticipantBackgroundColor #e6e6e6
}
participant "UE"
participant "gNB"
participant "SMF"
participant "UPF"
participant "8.8.8.8"

"SMF" -> "UPF": 25, PFCP req.\nPFCP Session Establishment Request (50)

note right #03B5AA
**SMF to UPF**
 ...
pfcp.msg_type: 'Message Type: PFCP Session Establishment Request (50)'
 ...
pfcp.seid: 'SEID: <Control_plane_SEID>'
   ...
   pfcp.network_instance: 'Network Instance: CustomSlice'
   ...
      pfcp.apply_action.forw: '.... ..1. = FORW (Forward): True'
      pfcp.apply_action.drop: '.... ...0 = DROP (Drop): False'
      ...
   pfcp.outer_hdr_creation.teid: 'TEID: <TEID>'
   pfcp.outer_hdr_creation.ipv4: 'IPv4 Address: <SMF_IP_Address>
   <Measurment, Reporting, and Volume Settings>
end note

"UPF" -> "SMF": 26, PFCP rsp.\nPFCP Session Establishment Response (51)

note right #D7FEFC
**UPF to SMF**
...
pfcp.msg_type: 'Message Type: PFCP Session Establishment Response (51)'
pfcp.seid: 'SEID: <User_plane_SEID>'
  ...
  Cause : Request accepted(success):
  ...
end note

"SMF" -> "UPF": 27, PFCP req.\nPFCP Session Modification Request (52)

note right #03B5AA
**SMF to UPF**
 ...
pfcp.msg_type: 'Message Type: PFCP Session Modification Request (52)'
pfcp.seid: 'SEID: <User_plane_SEID>'
Update FAR : [Grouped IE]:
    ...
    pfcp.outer_hdr_creation.ipv4: 'IPv4 Address: <gNB_IP_Adress>'
    ...
end note

"UPF" -> "SMF": 28, PFCP rsp.\nPFCP Session Modification Response (53)

note right #D7FEFC
**UPF to SMF**
...
pfcp.msg_type: 'Message Type: PFCP Session Modification Response (53)'
pfcp.seid: 'SEID: <User_plane_SEID>'
  ...
  Cause : Request accepted(success):
  ...
end note

"gNB" -> "UPF": 29, GTP<ICMP> ping req.

note right #5C8001
**gNB to UPF**
end note

"UPF" -> "8.8.8.8": 30, ICMP ping req.

note right #5C8001
**UPF to 8.8.8.8**
end note

"8.8.8.8" -> "UPF": 31, ICMP ping rsp.

note right #EDFEC2
**8.8.8.8 to UPF**
end note

"8.8.8.8" -> "UE": 32, GTP<ICMP> ping rsp.

note right #EDFEC2
**8.8.8.8 to UE**
end note

@enduml

PlantUML version 1.2019.12(Sun Nov 03 11:24:54 CET 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.18+10-post-Ubuntu-0ubuntu120.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>