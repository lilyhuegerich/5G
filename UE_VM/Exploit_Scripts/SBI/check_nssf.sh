nssf_ip="10.0.9.1"
interface="enp0s3"
while getopts "i:" opt; do
        case $opt in
		n)
			nssf_ip="$OPTARG"
			;;
                i)
                        interface="$OPTARG"
                        ;;
                \?)
			echo "Invalid option: -$OPTARG, valid options are -n (nssf ip) -i (interface to use default enp0s3)" >&2
                        exit 1
                        ;;
        esac
done

if [[ "$interface" == "enp0s3" ]]; then
	nghttp_call="nghttp http://"
else
	ip=`/home/lily/5G/SHARED/Tools/get_ip_of_ue.sh $interface`
	if [ $? -eq 1 ]; then
		echo $interface " not a valid interface, valid is either enp0s3 or a ue address or name."
		exit 1
	fi
	cd /home/lily/UERANSIM/build
	nghttp_call="./nr-binder $ip nghttp http://"
fi


uri=":7777/nnssf-nsselection/v2/network-slice-information?slice-info-request-for-pdu-session={\n\t"sNssai":\t{\n\t\t"sst":\t1\n\t},\n\t"roamingIndication":\t"NON_ROAMING"\n}"
uri=":7777/nnssf-nsselection/v2/nf-id=23a0d4cc-8c42-41ed-bf08-4305d2ff916b&nf-type=AMF"
#todo include the nf idjson ect.
UGreen='\033[0;32m'
UYellow='\033[0;33m'
color_off='\033[0m'

to_call="$nghttp_call$nssf_ip$uri"
echo -e "$color_off" $to_call
$to_call


exit 0
