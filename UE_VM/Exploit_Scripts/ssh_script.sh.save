#!/bin/bash

#grep -w -v -e "nologin" -e "bin/false" -e "admin" -e "root" -e "sync" /etc/passwd


otheruser=$(grep -w -v -e "nologin" -e "bin/false" -e "admin" -e "root" -e "sync" /etc/passwd | cut -d ":" -f 1)
echo "there is another user:  ${otheruser}"

path_to_open_5gs=$(find / -type d -name "open5gs" | head -n 1)
echo ${path_to_open_5gs}
cd ${path_to_open_5gs}

cd misc/db/python

pwd

python3
import Open5GS
print ("#############################################################")
print()
print()
print()
O= Open5GS.Open5GS("127.0.0.1", 27017) #connect to mongodb of open5gs
subscribers=O.GetSubscribers() 		# check open5gs subscibers
print("Subscribed to core network:")  
for subscriber in subscribers:
	print ("IMSI:", subscriber["imsi"])  #check subscriber data
	for slice in subscriber["slice"]:
		#print (slice)
		print("In slice: sst:", slice["sst"], " slice name: ", slice["session"][0]["name"])





#touch add_sub.py
#sudo apto install john
#unshadow /etc/passwd /etc/shadow


print ("#############################################################")
